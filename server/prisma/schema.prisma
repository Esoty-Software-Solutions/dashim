//////////////////////////////////////////////////////////////////////////////////////////////
// DO NOT MODIFY THIS FILE                                                                  //
// This file is automatically generated by ZenStack CLI and should not be manually updated. //
//////////////////////////////////////////////////////////////////////////////////////////////

datasource db {
    provider = "postgresql"
    url = env("DATABASE_URL")
    directUrl = env("DIRECT_URL")
}

generator client {
    provider = "prisma-client-js"
}

generator erd {
    provider = "prisma-erd-generator"
    theme = "forest"
}

/// @@allow('all', true && isPublished)
model Gender {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    arabic String?
    english String?
    name String @unique()
    user User[]
    subscriberGroup SubscriberGroup[]
}

/// @@allow('all', true && isPublished)
model User {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    firstName String
    secondName String?
    thirdName String?
    fourthName String?
    lastName String
    searchName String
    birthDate DateTime
    gender Gender? @relation(fields: [genderId], references: [id])
    genderId String?
    nationality String?
    nationalID String? @unique()
    residence String?
    address String?
    username String @unique()
    /// @email
    email String @unique()
    isEmailVerificationActive Boolean @default(false)
    phone String?
    isPhoneVerified Boolean @default(false)
    /// @omit
    passwordHash String
    deviceToken DeviceToken[]
    avatar String?
    ownerOf Tenant[]
    memberOf TenantMembers[]
}

/// @@allow('all', true && isPublished)
model TenantMembers {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    tenant Tenant @relation(fields: [tenantId], references: [id])
    tenantId String
    member User @relation(fields: [memberId], references: [id])
    memberId String

    @@index([tenantId, id])
    @@unique([memberId, id])
}

/// @@allow('all', true && isPublished)
model Tenant {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    name String
    type TenantType @relation(fields: [typeId], references: [id])
    typeId String
    description String?
    logo String?
    website String?
    phone String?
    email String?
    address String?
    city String?
    country String?
    assignedToInstitution Institution?
    assignedToMedicalCenter MedicalCenter?
    owner User @relation(fields: [ownerId], references: [id])
    ownerId String
    members TenantMembers[]
}

/// @@allow('all', true && isPublished)
model DeviceToken {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    name String
    deviceType DeviceType @relation(fields: [deviceTypeId], references: [id])
    deviceTypeId String
    user User @relation(fields: [userId], references: [id])
    userId String

    @@index([userId, name])
    @@unique([userId, name])
}

/// @@allow('all', true && isPublished)
model TenantType {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    arabic String?
    english String?
    name String @unique()
    tenant Tenant[]
}

/// @@allow('all', true && isPublished)
model Role {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    arabic String?
    english String?
    name String @unique()
}

/// @@allow('all', true && isPublished)
model DeviceType {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    arabic String?
    english String?
    name String @unique()
    deviceToken DeviceToken[]
}

/// @@allow('all', true && isPublished)
model Institution {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    name String
    code String
    legacyCode String?
    description String?
    cityHQ String?
    address String?
    phone String[] @unique()
    email String[] @unique()
    /// @url
    website String
    /// @url
    facebookLink String
    /// @url
    googleMapsLink String
    /// @url
    twitterLink String
    /// @url
    instagramLink String
    latitude Float?
    longitude Float?
    institutionCode String @unique()
    managingTenant Tenant @relation(fields: [managingTenantId], references: [id])
    managingTenantId String @unique()
    policies InsurancePolicy[]
    members Subscriber[]
}

/// @@allow('all', true && isPublished)
model Subscriber {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    institution Institution @relation(fields: [institutionId], references: [id])
    institutionId String
    insurancePolicy InsurancePolicy @relation(fields: [insurancePolicyId], references: [id])
    insurancePolicyId String
    subscriberGroup SubscriberGroup[]

    @@index([institutionId, id])
    @@unique([institutionId, id])
}

/// @@allow('all', true && isPublished)
model SubscriberGroup {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    firstName String
    secondName String?
    thirdName String?
    fourthName String?
    lastName String
    searchName String
    birthDate DateTime
    gender Gender? @relation(fields: [genderId], references: [id])
    genderId String?
    nationality String?
    nationalID String? @unique()
    residence String?
    address String?
    isActive Boolean @default(true)
    deactivationReason String?
    subscriber Subscriber @relation(fields: [subscriberId], references: [id])
    subscriberId String
    legacyCode String?
    relationship Relationship @relation(fields: [relationshipId], references: [id])
    relationshipId String
    isFingerprintVerificationActive Boolean @default(false)
    isIdCardVerificationActive Boolean @default(false)
    isFaceVerificationActive Boolean @default(false)
    isVoiceVerificationActive Boolean @default(false)
    fingerprint Fingerprint[]
    idCard IDCard[]
    face Face[]
    voice Voice[]
    entryRecords EntryRecord[]
    spents SubscriberGroupBalance[]

    @@index([subscriberId, id])
    @@unique([subscriberId, id])
}

/// @@allow('all', true && isPublished)
model Relationship {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    arabic String?
    english String?
    subscriberGroup SubscriberGroup[]
}

/// @@allow('all', true && isPublished)
model Fingerprint {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    fingerType FingerType @relation(fields: [fingerTypeId], references: [id])
    fingerTypeId String
    fingerprintHash String @unique()
    subscriberGroup SubscriberGroup @relation(fields: [subscriberGroupId], references: [id])
    subscriberGroupId String
    entryRecords EntryRecord[]

    @@index([subscriberGroupId, id])
    @@unique([subscriberGroupId, id])
    @@index([id, fingerTypeId])
    @@unique([id, fingerTypeId])
}

/// @@allow('all', true && isPublished)
model IDCard {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    cardHash String
    subscriberGroup SubscriberGroup @relation(fields: [subscriberGroupId], references: [id])
    subscriberGroupId String
    entryRecords EntryRecord[]

    @@index([subscriberGroupId, id])
    @@unique([subscriberGroupId, id])
}

/// @@allow('all', true && isPublished)
model Face {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    faceHash String
    subscriberGroup SubscriberGroup @relation(fields: [subscriberGroupId], references: [id])
    subscriberGroupId String
    entryRecords EntryRecord[]

    @@index([subscriberGroupId, id])
    @@unique([subscriberGroupId, id])
}

/// @@allow('all', true && isPublished)
model Voice {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    voiceHash String
    subscriberGroup SubscriberGroup @relation(fields: [subscriberGroupId], references: [id])
    subscriberGroupId String
    entryRecords EntryRecord[]

    @@index([subscriberGroupId, id])
    @@unique([subscriberGroupId, id])
}

/// @@allow('all', true && isPublished)
model FingerType {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    arabic String?
    english String?
    name String @unique()
    fingerType Fingerprint[]
}

/// @@allow('all', true && isPublished)
model InsurancePolicy {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    name String @unique()
    coPay Int
    limit Int
    institution Institution @relation(fields: [institutionId], references: [id])
    institutionId String
    subscribers Subscriber[]
    packageMedicalServices PackageMedicalServices[]
    medicalCenters InsurancePolicyMedicalCenters[]
}

/// @@allow('all', true && isPublished)
model BenefitPackage {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    name String @unique()
    limit Int
    medicalServices PackageMedicalServices[]
    spents SubscriberGroupBalance[]
}

/// @@allow('all', true && isPublished)
model PackageMedicalServices {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    beneftiPackage BenefitPackage @relation(fields: [beneftiPackageId], references: [id])
    beneftiPackageId String
    medicalService MedicalCenter @relation(fields: [medicalServiceId], references: [id])
    medicalServiceId String
    insurancePolicy InsurancePolicy @relation(fields: [insurancePolicyId], references: [id])
    insurancePolicyId String
    price Int
    patientServices PatientService[]
    patientExaminations PatientExamination[]

    @@unique([insurancePolicyId, beneftiPackageId, medicalServiceId])
    @@index([insurancePolicyId, beneftiPackageId, medicalServiceId])
}

/// @@allow('all', true && isPublished)
model InsurancePolicyMedicalCenters {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    insurancePolicyId String
    insurancePolicy InsurancePolicy @relation(fields: [insurancePolicyId], references: [id])
    medicalCenterId String
    medicalCenter MedicalCenter @relation(fields: [medicalCenterId], references: [id])
}

/// @@allow('all', true && isPublished)
model TimeWindow {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    medicalCenter MedicalCenter @relation(fields: [medicalCenterId], references: [id])
    medicalCenterId String @unique()
    time Int @default(24)
}

/// @@allow('all', true && isPublished)
model EntryRecord {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    subscriberGroup SubscriberGroup @relation(fields: [subscriberGroupId], references: [id])
    subscriberGroupId String
    fingerprintBiometric Fingerprint? @relation(fields: [fingerprintId], references: [id])
    fingerprintId String
    isValidated Boolean
    isManuallyInserted Boolean @default(false)
    idCard IDCard? @relation(fields: [idCardId], references: [id])
    idCardId String
    face Face? @relation(fields: [faceId], references: [id])
    faceId String
    voice Voice? @relation(fields: [voiceId], references: [id])
    voiceId String
    patientServices PatientService[]
    patientExamination PatientExamination?
}

/// @@allow('all', true && isPublished)
model PatientService {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    entryRecord EntryRecord @relation(fields: [entryRecordId], references: [id])
    entryRecordId String
    Note String?
    isWorkInjury Boolean @default(false)
    name String
    cash Int
    limit Int
    deffered Int
    reviewStatus ReviewStatus @relation(fields: [reviewStatusId], references: [id])
    reviewStatusId String
    patientExamination PatientExamination @relation(fields: [patientExaminationId], references: [id])
    patientExaminationId String
    serviceId String
    service PackageMedicalServices @relation(fields: [serviceId], references: [id])
}

/// @@allow('all', true && isPublished)
model PatientExamination {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    entryRecord EntryRecord @relation(fields: [entryRecordId], references: [id])
    entryRecordId String @unique()
    Note String?
    isWorkInjury Boolean @default(false)
    name String
    cash Int
    limit Int
    deffered Int
    reviewStatus ReviewStatus @relation(fields: [reviewStatusId], references: [id])
    reviewStatusId String
    patientServices PatientService[]
    serviceId String
    service PackageMedicalServices @relation(fields: [serviceId], references: [id])
}

/// @@allow('all', true && isPublished)
model ReviewStatus {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    arabic String?
    english String?
    name String @unique()
    patientServices PatientService[]
    PatientExamination PatientExamination[]
}

/// @@allow('all', true && isPublished)
model SubscriberGroupBalance {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    subscriberGroupId String
    subscriberGroup SubscriberGroup @relation(fields: [subscriberGroupId], references: [id])
    beneftiPackageId String
    beneftiPackage BenefitPackage @relation(fields: [beneftiPackageId], references: [id])
    balance Float
}

/// @@allow('all', true && isPublished)
model MedicalCenter {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    name String
    code String
    description String
    cityHQ String
    address String?
    phone String[] @unique()
    email String[] @unique()
    /// @url
    website String
    /// @url
    facebookLink String
    /// @url
    googleMapsLink String
    /// @url
    twitterLink String
    /// @url
    instagramLink String
    latitude Float?
    longitude Float?
    managingTenant Tenant @relation(fields: [managingTenantId], references: [id])
    managingTenantId String @unique()
    services MedicalCenterService[]
    beneftiPackages PackageMedicalServices[]
    insurancePolicy InsurancePolicyMedicalCenters[]
    timeWindow TimeWindow?
}

/// @@allow('all', true && isPublished)
model MedicalCenterServiceTemplate {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    name String
    dalilCode String
    basePrice String
    services MedicalCenterService[]
}

/// @@allow('all', true && isPublished)
model MedicalCenterService {
    id String @id()
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt()
    isPublished Boolean @default(true)
    isSoftDeleted Boolean @default(false)
    isActive Boolean @default(true)
    deactivationReason String?
    name String
    medicalCenterCode String
    basePrice String
    medicalCenter MedicalCenter @relation(fields: [medicalCenterId], references: [id])
    medicalCenterId String @unique()
    template MedicalCenterServiceTemplate @relation(fields: [templateId], references: [id])
    templateId String

    @@index([medicalCenterId, medicalCenterCode])
    @@unique([medicalCenterId, medicalCenterCode])
    @@index([templateId, medicalCenterId, medicalCenterCode])
    @@unique([templateId, medicalCenterId, medicalCenterCode])
}